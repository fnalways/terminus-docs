# 账单

## Payment Method
- 我们选择与 [Stripe](https://stripe.com/) 进行合作，你的所有账单将由 Stripe 进行代收。
- 在大部分场景下，我们会通过 Email 向你发送 Invoice 和 Receipt 信息，以帮助你了解费用明细或记录。如果你在支付过程中有疑问，可以联系我们。
- 我们只保存你常用付款方式的部分信息，如果是银行卡，我们只会保存 last4 等非敏感信息，其他信息都在 Stripe 保存。

## Fee Deduction Method
- **我们以月为账单周期**。比如你在 4 月 18 号购买了资源，那每月18号就是你的账单日。次月账单在一个自然月以后，比如你首次购买集群在 1 月 31 号，由于一个自然月后的目标日期不存在，次月账单会是 2 月最后一天，2月28（或2月29号，取决于它是否是闰年）。
- **自动扣费**。当你使用 Stripe 进行首期付款后，即代表你授权了自动扣款，你首次使用的付款方式会被设置了默认付款项，后续账单将尝试从此付款方式自动扣款，你可以阅读 [Stripe Automatic charging](https://docs.stripe.com/invoicing/automatic-charging) 以了解更多细节。如果你不希望被自动扣款。你也可以在控制台删除或修改默认付款方式，如果你删除了默认付款方式，下次账单你应该主动去完成付款操作。
- **付款/扣款有效期**。当你进行了购买行为后，系统会生成一个 24 小时有效期的账单，超过 24 小时未完成支付，它将会被自动取消。如果是循环账单，我们会在下一个账单日产生 Invoice，然后在产生 Invoice 的 1 小时后进行自动扣款尝试，如果尝试失败，系统会在未来的第 1、3、5、7 天陆续尝试继续扣款。每次扣款失败我们会向你的邮箱发送 Invoice，你可以点击链接完成手动付款。

## Trial Funds
- **体验金的获取**。我们通过运营活动为用户发送体验金。当用户收到体验金以后，在 Cloud 端能通过余额历史看到它。
- **体验金的使用方式**。该体验金可用于支付集群相关产品的账单。比如你通过注册新用户得到了 $20 的体验金。你在创建一个 OS 集群时，实际账单如果是 $49，在尝试付款时，你会看到这个 $20 将会被抵扣，这个 Invoice 实际只需要再支付 $29。你不能主动选择使用多少金额，系统会自动全部可用的体验金来抵扣账单。
- **体验金的退回**。体验金默认不会退回。比如按照<体验金的获取>，你得到了 $20 的体验金。当你购买了一个 $49 的 OS 集群时，实际需要支付 $29。使用了一周后你申请了销毁（可以选择退款到余额或者原路退回），此时系统会优先使用体验金抵扣账单金额，按退款公式计算应退金额。但退款金额不会超过实际支付金额（最多为 $29）。

## Billing Products
Terminus OS 目前有以下可能产生费用的产品。
- **主机实例费用**，你在创建 Terminus OS 时，它需要一台主机，可能是 AWS 或 GCS，它是预付费产品，你需要先完成付款，然后会得到一个云主机资源，我们在这个云主机进行 Terminus OS 主机的安装。你可以也可以登录并正常使用这台机器。
- **云存储**，我们的 OS 通过 JuiceFS 逐渐把系统存储数据挂载在云端的 S3 桶内。它是后付费产品，第二个账单日产生内时，我们会根据你本账单周期云存储量使用量生成相关费用明细，你会在第二期的账单内看到它。
- **云备份**，我们的 OS 有 Backup 功能，当你选择云端存储时，意味着你选择将主机的数据备份到我们的公共存储云。与云存储一样，它是后付费产品。
- **主机实例流量**。云主机如果产生对外的流量（对外是面向本区域以外的互联网，多种场景下都有可能产生对外流量），则会产生流量费。它与云存储一样也是后付费产品，系统基于你的使用量产生流量账单。
- **Cloudflare Tunnel（或 FRP）流量**，当你在一个内网环境安装 OS 后，通过FRP方案将某些服务部署到公共互联网。当有人通过这些链接访问服务时，它会产生一个 FRP 的流量费。它同样是一个后付费产品。
- **GPU unit**，GPU 计费相关功能尚未上线。当你使用我们创建的 GPU 相关服务时，它是一个预付费产品，你使用前需要先购买一些单位额度，当你每次使用时，系统会根据使用内容消耗一定额度。

## Minimum Billable Duration And Metering Rules
- **对于计时产品**，对于预付费产品，如实例资源，当你请求购买时，账单的最小计时单位单位为 1 分钟（不足 1 分钟按 1 分钟计算），比如你在账单周期的中途添加一个 worker，它会按照最小 1 分钟的时长来计算剩余时长，并算出账单金额。对于计量相关产品，它的最小计费时长为 1 小时，不足 1 小时的按 1 小时计算。比如，你申请了一个集群，在使用了 30 分钟后选择销毁，系统会扣除 1 小时的使用费（不足1小时都按1小时算）。
- **对于计量产品**，计量规则是一个比较复杂的设定。我们仍在整理中，它可能需要是一个单独页面。

## Coupon
- 这部分待定，目前我们使用到的都是体验金部分，它与优惠券应该是分开的。
- 优惠券是另一个概念，适用于多种复杂的营销场景。比如发放给指定用户的全品类优惠券，发送给指定商品的优惠券，满减优惠券，新用户首次优惠券。
- 后续等产品中有优惠券的使用需求和场景后，会根据实际形态，写一个专门页面来说明它。

## Generate Bill And Pay
在以下几种情况下，都会产生账单并可能需要付费。

- **创建云上的 Terminus**，根据你创建过程中选取的云服务商，以及不同地域的不同机型配置，它有不同的定价。在你选择好并点击创建后，我们将实时创建一个 Invoice，在你完成付款后。云资源开始准备并进行TerminusOS的安装。
- **为云上的 Terminus 添加 Worker**，也将按月收取你的费用。除了首期之外，将合并到月账单中统一收取。
- **恢复快照到云**，等同于创建了一个新的云上的 Terminus，也将按月收取你的费用
- **销毁云上的 Terminus**，此时我们将实时结算截止到当前为止的费用。多退少补。
- **每月账单，按实际使用付费**。每个月我们将更新月账单。包含了本月的基础订阅费用，以及本月新增加的费用。比如新增 Worker，或者是产生的额外的流量和存储费用。


## View bill
每个月我们会自动更新账单信息，如果有额外增加的费用，则需要你的支付。

完整的账单将包含如下信息:

- **未支付待支付**，如果有本月尚未结算的费用，将在此部分中显示。如果没有，则不显示。
- **即将到来的账单**，这里将显示马上需要结算的月份账单。包含了已支付的当月订阅费用，以及本月产生的额外的流量和存储费用。
- **支付方式设置**，这里可以添加用于支付的银行卡，还可以设置默认支付的银行卡。如果你添加了多张银行卡，将优先从默认支付的银行卡中划款。如果支付失败，将尝试使用其他银行卡进行支付。
- **最近的一个月完整账单**，这里显示了最近的已经支付完的月份账单。包含了已支付的当月订阅费用，以及当月产生的额外的流量和存储费用。
- **按月提供的历史账单列表**，这里按照月份，显示了历史上所有的已经支付完的月份账单。你可以了解到每一个月的消费详情。

## Historical bill
- 系统会按账单周期（当前默认为月）总结并记录你的消费情况。

- 你可以查看根据月份查看每个月的详情账单数据，其中包含当月的实例资源费用，和你在使用过程中额外的流量和存储费用。每一种商品都会有使用周期和使用量的统计情况。

## Example Of Bill Amount
这里列举一些典型的场景，用来说明账单金额的产生逻辑。

- **创建一个集群**，系统会产生一个你选择集群配置所包含预付费产品的账单信息，当你完成付款后，集群等待创建。
- **为集群添加一个 worker**，系统会计算当前时间到本期账单结束之间的总时长，然后根据总时间和一个计费周期之间的比例来产生一个账单金额，比如你的首次账单日是3月15号，当你在3月20号申请添加一个金额为$29的worker实例时，剩余时长是4月15号-3月20号=26天(最小时长是1分钟，不足1分钟按1分钟计算)，账单金额应该是29*26/31≈$24.32，你需要完成这个账单支付，集群会开始进行worker的申请和添加。
- **移除集群中的 worker**，与添加 worker 时的逻辑类似，系统先计算当前时间到本周账单结束之间的剩余可用时长(1小时为最小单位，超过1小时的按1小时算)。接上一个例子，你在3月25号要移除这个worker，剩余时间是4月15-3月25号=21天，应退还金额=24.32/26*21≈$19.63，系统会根据你的选择，将这部分金额退回到余额或银行卡(体验金或优惠券部分不退，以实际支付金额为准)。
- **添加一块 SSD 硬盘**，与添加 worker 的逻辑类似，但涉及到跨月的账单计算问题。因为存储的计费单位是每月每G每小时。如果账单产生了跨月，则计费差价的总时间长=(当前时间到本自然月结束)+(次月开始时间+本期账单结束)，结算得时长后，按最小时间为1小时的原则计算应付账单的金额。
- **卸载一块 SSD 硬盘**，卸载 SSD 后，会销毁这块 SSD。并退回剩余应付金额。计算时长规则与<添加一块SSD硬盘>类似，计算到剩余未用时长后，以最小1小时为单位(不足1小时的按1小时算)，计算应退金额，并按照你所选的退款方式退回。
- **销毁一个集群**，销毁集群时，会先按照“移除集群中的 worker”的逻辑，计算应退金额。然后再计算本周期内产生的预付费金额，比如存储流量等计量预付费产品产生的使用费，最后用应退金额减去应付金额，如果该值大于0，则代表需退款，系统会将相应金额退回到你的指定方式，如果该值等于0，则不退不补，如果该值小于0，则意味着应付金额大于应退金额，不会发生退款，这个结果会被记账到你的余额，当你下次创建集群或购买其他产品时，会被计入那时的账单。

## Arrears
- 余额为负数不代表是欠款，有可能是正常计费。
- 如果在集群的账单付款周日内，系统没有成功的自动扣款，你也没有主动的进行付款。则你的账户可能会被标记为欠款。
- 当发生欠款时，我们会尝试对你的集群进行一次 final backup，然后销毁实例资源。
- 中间的每一步你都会收到邮件通知，你可以随时在邮件通知里点击 Invoice 链接进行付款。

## View Balance History
- 余额是指包含体验金和集群退款金额的部分。
- 它的增加有可能是运营活动和用户发起的退款到账，它的减少是被应用于账单。
- 你可以通过余额历史记录，来查看你每一笔余额的获取和使用情况，并可以知道它是和哪个账单关联的。

## Explanation Of Bill Amount Being Too Small
- 因为 Stripe 对每一笔付款都收取手续费，所以我们对最小支付金额有限制。

- 如果账单产生的金额小于 $1，我们实际上不会发起银行卡收款，会进行记账到你的余额中。比如你的某一笔 Invoice 金额是 $0.45，在你尝试发起付款时，它会直接显示成功，但你蛾余额会-0.45，它将累计到你的下一期账单中。


::: tip
在 Alpha 阶段，我们没有进行实际收费。
请大家以合理的方式使用，以方便我们进行体验、价格等各方面的优化。

无论用户的 Terminus 是部署在 Terminus Space 上还是 self-hosted，我们都会提供一个免费的额度。

对于 Self-hosted 用户来说，主要关注的流量和 Backup 使用的空间可能产生的费用。
:::


# FAQ

1. 如果我看电影是否会扣除费用？

   一般情况下，你在家里看电影，使用 local 域名访问，不产生外网的流量，所以不会。
   在外面访问家里的设备，使用 P2P 模式时，流量不通过 Space 服务器，所以也不会。
   在外面访问家里设备，如果无法直接访问通过，只能使用 DERP 中转时，可能会产生费用。如果你遇到这种情况，请联系我们

2. 我部署了一个 Wordpress，别人访问时是否产生费用？

   会产生。因为 Cloudflare 和云厂商会对我们收取费用。费用包含两个部分：1. 流量通过 Cloudflare 的费用，这个主要是帮助隐藏 Terminus 的真实 IP，提供防止 DDOS 等基础的安全保障 2. 你选择的云厂商的对外流量费用。
   坦诚地说，我们认为这两个服务的费用都不便宜，我们会在接下去优化这两个服务的费用。
   如果你有想法，也欢迎联系我们。
